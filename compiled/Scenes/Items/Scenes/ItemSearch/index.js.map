{"version":3,"sources":["../../../../../src/Scenes/Items/Scenes/ItemSearch/index.jsx"],"names":["React","slide","Menu","Loadable","connect","withRouter","CommandList","Translator","QueryList","BaseService","LIGHTBOX_ACTIONS","BodyLoader","MODAL_ACTIONS","SearchItemDTO","queryString","require","SearchMap","loader","loading","FilterSearch","ItemsSlider","ItemSearch","Component","constructor","state","search","zoom","validation","latitude","longitude","result","radius","aggs","categories","isLoading","positionOn","catAbovePin","currentElement","undefined","currentPosition","positionCenter","currentIndex","refSlider","componentWillReceiveProps","nextProps","props","location","loadFunc","componentDidMount","showAbovePin","catOptions","setState","parsed","parse","distance","rad","indexOf","Number","split","lat","auth","user","lon","freetext","q","category_id","tag","JSON","startDate","endDate","createdInterval","getItems","then","succ","console","log","data","items","setColor","init","tran","codeDict","LABEL","lang","setCurrentElement","element","render","phTrans","PLACEHOLDER","position","overflowX","bmBurgerButton","fontSize","left","length","bind","BODY_PROGRESS","mapStateToProps","DictionaryReducer","LanguageReducer","AuthReducer","LoaderReducer","mapDispatchToProps","dispatch","openLightbox","activeImage","images","type","OPEN_LIGHTBOX","dto","queryThunt","Item","SEARCH_ITEM","createNewItem","commandThunt","NEW_ITEM","getUserImages","Blob","GET_USER_IMAGES","openUserModal","open","action","item","OPEN_MODAL","param"],"mappings":"AAAA;;;AAIA,OAAO,0BAAP;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAK,IAAIC,IAAlB,QAA8B,mBAA9B;AACA,OAAO,iDAAP,C,CAA0D;;AAC1D,OAAOC,QAAP,MAAqB,gBAArB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,WAAP,MAAwB,mCAAxB;AACA,SAASC,UAAT,QAA2B,6BAA3B;AACA,OAAOC,SAAP,MAAsB,iCAAtB;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,OAAOC,gBAAP,MAA6B,iDAA7B;AACA,OAAOC,UAAP,MAAuB,oDAAvB;AACA,OAAOC,aAAP,MAA0B,+CAA1B;AACA,OAAOC,aAAP,MAA0B,gDAA1B;;AAGA,MAAMC,WAAW,GAAGC,OAAO,CAAC,cAAD,CAA3B;;AAKA,MAAMC,SAAS,GAAGb,QAAQ,CAAC;AACzBc,EAAAA,MAAM,EAAE,MAAO,OAAO,0BAAP,CADU;;AAEzBC,EAAAA,OAAO,GAAG;AACN,WAAQ,oBAAC,UAAD;AAAY,MAAA,MAAM,EAAE,CAApB;AAAuB,MAAA,MAAM,EAAC,MAA9B;AAAqC,MAAA,IAAI,EAAC;AAA1C,MAAR;AACH;;AAJwB,CAAD,CAA1B;AAMA,MAAMC,YAAY,GAAGhB,QAAQ,CAAC;AAC1Bc,EAAAA,MAAM,EAAE,MAAO,OAAO,6BAAP,CADW;;AAE1BC,EAAAA,OAAO,GAAG;AACN,WAAQ,oBAAC,UAAD;AAAY,MAAA,MAAM,EAAE,CAApB;AAAuB,MAAA,MAAM,EAAC,MAA9B;AAAqC,MAAA,IAAI,EAAC;AAA1C,MAAR;AACH;;AAJyB,CAAD,CAA7B;AAME,MAAME,WAAW,GAAGjB,QAAQ,CAAC;AAC7Bc,EAAAA,MAAM,EAAE,MAAO,OAAO,wCAAP,CADc;;AAE7BC,EAAAA,OAAO,GAAG;AACN,WAAQ,oBAAC,UAAD;AAAY,MAAA,MAAM,EAAE,CAApB;AAAuB,MAAA,MAAM,EAAC,MAA9B;AAAqC,MAAA,IAAI,EAAC;AAA1C,MAAR;AACH;;AAJ4B,CAAD,CAA5B;;AASF,MAAMG,UAAN,SAAyBrB,KAAK,CAACsB,SAA/B,CAAyC;AAErCC,EAAAA,WAAW,GAAG;AACV;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKA,KAAL,CAAWC,MAAX,GAAoB,IAAIZ,aAAJ,EAApB;AACA,SAAKW,KAAL,CAAWE,IAAX,GAAkB,EAAlB;AACA,SAAKF,KAAL,CAAWG,UAAX,GAAwB,EAAxB;AACA,SAAKH,KAAL,CAAWI,QAAX,GAAsB,CAAtB;AACA,SAAKJ,KAAL,CAAWK,SAAX,GAAuB,CAAvB;AACA,SAAKL,KAAL,CAAWM,MAAX,GAAoB,EAApB;AACA,SAAKN,KAAL,CAAWO,MAAX,GAAoB,IAApB;AACA,SAAKP,KAAL,CAAWQ,IAAX,GAAkB,EAAlB;AACA,SAAKR,KAAL,CAAWS,UAAX,GAAwB,EAAxB;AACA,SAAKT,KAAL,CAAWU,SAAX,GAAuB,IAAvB;AACA,SAAKV,KAAL,CAAWW,UAAX,GAAwB,KAAxB;AACA,SAAKX,KAAL,CAAWY,WAAX,GAAyB,EAAzB;AACA,SAAKZ,KAAL,CAAWa,cAAX,GAA4BC,SAA5B;AACA,SAAKd,KAAL,CAAWe,eAAX,GAA6BD,SAA7B;AACA,SAAKd,KAAL,CAAWgB,cAAX,GAA4B,EAA5B;AAEA,SAAKhB,KAAL,CAAWiB,YAAX,GAA0BH,SAA1B;AACA,SAAKI,SAAL,GAAiB,EAAjB;AAEH;;AAGDC,EAAAA,yBAAyB,CAACC,SAAD,EAAY;AACjC,QAAI,KAAKC,KAAL,CAAWC,QAAX,CAAoBrB,MAApB,IAA8BmB,SAAS,CAACE,QAAV,CAAmBrB,MAArD,EAA6D;AACzD,WAAKsB,QAAL,CAAc,KAAKH,SAAnB;AACH;AACJ;;AAEDI,EAAAA,iBAAiB,GAAG;AAChB,SAAKD,QAAL,CAAc,KAAKF,KAAnB;AACH;;AACDI,EAAAA,YAAY,CAACC,UAAD,EAAa;AACrB,SAAKC,QAAL,CAAc;AACVf,MAAAA,WAAW,EAAEc;AADH,KAAd;AAGH;;AAEDH,EAAAA,QAAQ,CAACF,KAAD,EAAQ;AACZ,SAAKM,QAAL,CAAc;AAAEjB,MAAAA,SAAS,EAAE;AAAb,KAAd;AAEA,UAAMkB,MAAM,GAAGtC,WAAW,CAACuC,KAAZ,CAAkBP,QAAQ,CAACrB,MAA3B,CAAf;AAEA,SAAKD,KAAL,CAAWC,MAAX,CAAkB6B,QAAlB,GAA6BF,MAAM,CAACG,GAAP,GAAaH,MAAM,CAACG,GAApB,GAA0B,KAAvD;;AACA,QAAI,KAAK/B,KAAL,CAAWC,MAAX,CAAkB6B,QAAlB,CAA2BE,OAA3B,CAAmC,GAAnC,IAA0C,CAA9C,EAAiD;AAC7C,WAAKhC,KAAL,CAAWO,MAAX,GAAoB0B,MAAM,CAAC,KAAKjC,KAAL,CAAWC,MAAX,CAAkB6B,QAAlB,CAA2BI,KAA3B,CAAiC,GAAjC,EAAsC,CAAtC,CAAD,CAA1B;AACH;;AACD,QAAI,KAAKlC,KAAL,CAAWC,MAAX,CAAkB6B,QAAlB,CAA2BE,OAA3B,CAAmC,IAAnC,IAA2C,CAA/C,EAAkD;AAC9C,WAAKhC,KAAL,CAAWO,MAAX,GAAoB0B,MAAM,CAAC,KAAKjC,KAAL,CAAWC,MAAX,CAAkB6B,QAAlB,CAA2BI,KAA3B,CAAiC,IAAjC,EAAuC,CAAvC,CAAD,CAAN,GAAoD,IAAxE;AACH;;AAED,SAAKP,QAAL,CAAc;AACVpB,MAAAA,MAAM,EAAE,KAAKP,KAAL,CAAWO;AADT,KAAd;;AAGA,QAAI,KAAKP,KAAL,CAAWO,MAAX,GAAoB,IAAxB,EAA8B;AAC1B,WAAKP,KAAL,CAAWE,IAAX,GAAkB,EAAlB;AACH;;AACD,QAAI,KAAKF,KAAL,CAAWO,MAAX,GAAoB,IAAxB,EAA8B;AAC1B,WAAKP,KAAL,CAAWE,IAAX,GAAkB,EAAlB;AACH;;AACD,QAAI,KAAKF,KAAL,CAAWO,MAAX,GAAoB,KAAxB,EAA+B;AAC3B,WAAKP,KAAL,CAAWE,IAAX,GAAkB,EAAlB;AACH;;AACD,SAAKyB,QAAL,CAAc;AACVzB,MAAAA,IAAI,EAAE,KAAKF,KAAL,CAAWE;AADP,KAAd;AAGA,SAAKF,KAAL,CAAWC,MAAX,CAAkBkC,GAAlB,GAAwBP,MAAM,CAACO,GAAP,GAAaP,MAAM,CAACO,GAApB,GAA0B,KAAKd,KAAL,CAAWe,IAAX,CAAgBC,IAAhB,CAAqBjC,QAAvE;AACA,SAAKJ,KAAL,CAAWC,MAAX,CAAkBqC,GAAlB,GAAwBV,MAAM,CAACU,GAAP,GAAaV,MAAM,CAACU,GAApB,GAA0B,KAAKjB,KAAL,CAAWe,IAAX,CAAgBC,IAAhB,CAAqBhC,SAAvE;AACA,SAAKL,KAAL,CAAWC,MAAX,CAAkBsC,QAAlB,GAA6BX,MAAM,CAACY,CAApC;AACA,SAAKxC,KAAL,CAAWC,MAAX,CAAkBwC,WAAlB,GAAgCb,MAAM,CAACa,WAAvC;AACA,SAAKzC,KAAL,CAAWC,MAAX,CAAkByC,GAAlB,GAAwBd,MAAM,CAACc,GAAP,IAAc,EAAd,GAAmBC,IAAI,CAACd,KAAL,CAAWD,MAAM,CAACc,GAAlB,CAAnB,GAA4C5B,SAApE;AACA,SAAKd,KAAL,CAAWC,MAAX,CAAkB2C,SAAlB,GAA8BhB,MAAM,CAACgB,SAAP,IAAoB9B,SAApB,IAAiCc,MAAM,CAACgB,SAAP,IAAoB,EAArD,GAA0DhB,MAAM,CAACgB,SAAjE,GAA6E9B,SAA3G;AACA,SAAKd,KAAL,CAAWC,MAAX,CAAkB4C,OAAlB,GAA4BjB,MAAM,CAACiB,OAAP,IAAkB/B,SAAlB,IAA+Bc,MAAM,CAACiB,OAAP,IAAkB,EAAjD,GAAsDjB,MAAM,CAACiB,OAA7D,GAAuE/B,SAAnG;AACA,SAAKd,KAAL,CAAWC,MAAX,CAAkB6C,eAAlB,GAAoClB,MAAM,CAACkB,eAAP,IAA0BhC,SAA1B,IAAuCc,MAAM,CAACkB,eAAP,IAA0B,EAAjE,GAAsElB,MAAM,CAACkB,eAA7E,GAA+FhC,SAAnI;AACA,SAAKd,KAAL,CAAWC,MAAX,CAAkByB,UAAlB,GAA+BE,MAAM,CAACF,UAAP,IAAqBZ,SAArB,IAAkCc,MAAM,CAACF,UAAP,IAAqB,EAAvD,IAA6DiB,IAAI,CAACd,KAAL,CAAWD,MAAM,CAACF,UAAlB,KAAiC,EAA9F,GAAmGiB,IAAI,CAACd,KAAL,CAAWD,MAAM,CAACF,UAAlB,CAAnG,GAAmIZ,SAAlK;AAEA,SAAKa,QAAL,CAAc;AACV1B,MAAAA,MAAM,EAAE,KAAKD,KAAL,CAAWC,MADT;AAEVc,MAAAA,eAAe,EAAE,CAAE,KAAKf,KAAL,CAAWC,MAAX,CAAkBkC,GAApB,EAAwB,KAAKnC,KAAL,CAAWC,MAAX,CAAkBqC,GAA1C,CAFP;AAGVtB,MAAAA,cAAc,EAAC,CAAE,KAAKhB,KAAL,CAAWC,MAAX,CAAkBkC,GAApB,EAAwB,KAAKnC,KAAL,CAAWC,MAAX,CAAkBqC,GAA1C;AAHL,KAAd;AAKA,SAAKjB,KAAL,CAAW0B,QAAX,CAAoB,KAAK/C,KAAL,CAAWC,MAA/B,EAAuC+C,IAAvC,CAA4CC,IAAI,IAAI;AAChD,WAAKtB,QAAL,CAAc;AAAEjB,QAAAA,SAAS,EAAE;AAAb,OAAd;AACAwC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,IAAL,CAAUC,KAAtB;AACA,UAAI/C,MAAM,GAAGqC,IAAI,CAACd,KAAL,CAAWoB,IAAI,CAACG,IAAL,CAAUC,KAArB,CAAb;AACAH,MAAAA,OAAO,CAACC,GAAR,CAAY7C,MAAZ;AAEA,WAAKqB,QAAL,CAAc;AACVnB,QAAAA,IAAI,EAAEyC,IAAI,CAACG,IAAL,CAAU5C,IADN;AAEVF,QAAAA,MAAM,EAAEA;AAFE,OAAd;AAIH,KAVD;AAWH;;AAEDgD,EAAAA,QAAQ,CAAC7C,UAAD,EAAa;AAEjB,SAAKkB,QAAL,CAAc;AACVlB,MAAAA,UAAU,EAAEA;AADF,KAAd;AAGH;;AAED8C,EAAAA,IAAI,GAAG;AACH,SAAKC,IAAL,GAAYzE,UAAU,CAAC,KAAKsC,KAAL,CAAWoC,QAAX,CAAoBL,IAApB,CAAyBM,KAA1B,EAAiC,KAAKrC,KAAL,CAAWsC,IAA5C,CAAtB;AAEH;;AAIDC,EAAAA,iBAAiB,CAACC,OAAD,EAAU;AACvB,SAAKlC,QAAL,CAAc;AACVd,MAAAA,cAAc,EAAEgD,OADN;AAEV9C,MAAAA,eAAe,EAAE,CAAC8C,OAAO,CAACzD,QAAT,EAAmByD,OAAO,CAACxD,SAA3B,CAFP;AAGVH,MAAAA,IAAI,EAAE;AAHI,KAAd;AAKH;;AAED4D,EAAAA,MAAM,GAAG;AACL,UAAMN,IAAI,GAAGzE,UAAU,CAAC,KAAKsC,KAAL,CAAWoC,QAAX,CAAoBL,IAApB,CAAyBM,KAA1B,EAAiC,KAAKrC,KAAL,CAAWsC,IAA5C,CAAvB;AACA,UAAMI,OAAO,GAAGhF,UAAU,CAAC,KAAKsC,KAAL,CAAWoC,QAAX,CAAoBL,IAApB,CAAyBY,WAA1B,EAAuC,KAAK3C,KAAL,CAAWsC,IAAlD,CAA1B,CAFK,CAOL;;AAEA,WACI;AAAK,MAAA,EAAE,EAAC,iBAAR;AAA0B,MAAA,KAAK,EAAE;AAAEM,QAAAA,QAAQ,EAAE,UAAZ;AAAwBC,QAAAA,SAAS,EAAE;AAAnC;AAAjC,YAAiF,oBAAC,IAAD;AAAM,MAAA,MAAM,EAAE,IAAd;AAAoB,MAAA,MAAM,EAAE;AACzGC,QAAAA,cAAc,EAAE;AACZC,UAAAA,QAAQ,EAAE,MADE;AAEZC,UAAAA,IAAI,EAAE;AAFM;AADyF,OAA5B;AAK9E,MAAA,KAAK,EAAE,KALuE;AAKhE,MAAA,gBAAgB,EAAE,kCAAQ;AAAG,QAAA,SAAK,EAAC,cAAT;AAAwB,QAAA,KAAK,EAAE;AAAED,UAAAA,QAAQ,EAAE;AAAZ;AAA/B,QAAR,EAAiE,+BAAjE,EAAuE;AAAM,QAAA,SAAS,EAAC;AAAhB,SAAqC,KAAKpE,KAAL,CAAWM,MAAX,CAAkBgE,MAAvD,CAAvE;AAL8C,OAM7E,oBAAC,YAAD;AAAc,MAAA,IAAI,EAAE,KAAKtE,KAAL,CAAWQ,IAA/B;AAAqC,MAAA,QAAQ,EAAE,KAAK8C,QAAL,CAAciB,IAAd,CAAmB,IAAnB,CAA/C;AAAyE,MAAA,SAAS,EAAE,KAAKvE,KAAL,CAAWU,SAA/F;AAA0G,MAAA,YAAY,EAAE,KAAKe,YAAL,CAAkB8C,IAAlB,CAAuB,IAAvB;AAAxH,MAN6E,CAAjF,EASI;AAAK,MAAA,EAAE,EAAC;AAAR,OAAsB,KAAKlD,KAAL,CAAW5B,MAAX,CAAkB+E,aAAlB,GAAkC,GAAlC,IAAyC,KAAKxE,KAAL,CAAWU,SAArD,GAAkE,oBAAC,UAAD;AAAY,MAAA,MAAM,EAAE,CAApB;AAAuB,MAAA,MAAM,EAAC,MAA9B;AAAqC,MAAA,IAAI,EAAC,OAA1C;AAAkD,MAAA,QAAQ,EAAE,KAAKW,KAAL,CAAW5B,MAAX,CAAkB+E;AAA9E,MAAlE,GACjB,iCACI,oBAAC,SAAD;AAAW,MAAA,QAAQ,EAAE,KAAKxE,KAAL,CAAWC,MAAX,CAAkB6B,QAAvC;AAAgD,MAAA,KAAK,EAAE,KAAK9B,KAAL,CAAWM,MAAlE;AAA0E,MAAA,iBAAiB,EAAE,KAAKsD,iBAAL,CAAuBW,IAAvB,CAA4B,IAA5B,CAA7F;AAAiI,MAAA,eAAe,EAAE,KAAKvE,KAAL,CAAWe,eAA7J;AAA8K,MAAA,cAAc,EAAE,KAAKf,KAAL,CAAWgB,cAAzM;AAAyN,MAAA,cAAc,EAAE,KAAKhB,KAAL,CAAWa,cAApP;AAAoQ,MAAA,WAAW,EAAE,KAAKb,KAAL,CAAWY,WAA5R;AAAyS,MAAA,UAAU,EAAE,KAAKZ,KAAL,CAAWS;AAAhU,MADJ,EAGI,oBAAC,WAAD;AAAa,MAAA,cAAc,EAAE,CAA7B;AAAgC,MAAA,KAAK,EAAE,KAAKT,KAAL,CAAWM,MAAlD;AAA0D,MAAA,cAAc,EAAE,KAAKN,KAAL,CAAWa,cAArF;AAAsG,MAAA,iBAAiB,EAAE,KAAK+C,iBAAL,CAAuBW,IAAvB,CAA4B,IAA5B;AAAzH,MAHJ,CADJ,CATJ,CADJ;AA6BH;;AA9JoC;;AAkKzC,MAAME,eAAe,GAAIzE,KAAD,IAAW;AAC/B;AAEA,SAAO;AACHyD,IAAAA,QAAQ,EAAEzD,KAAK,CAAC0E,iBADb;AAEHf,IAAAA,IAAI,EAAE3D,KAAK,CAAC2E,eAFT;AAGHvC,IAAAA,IAAI,EAAEpC,KAAK,CAAC4E,WAHT;AAIHnF,IAAAA,MAAM,EAAEO,KAAK,CAAC6E;AAJX,GAAP;AAOH,CAVD;;AAYA,MAAMC,kBAAkB,GAAIC,QAAD,IAAc;AACrC,SAAO;AAIHC,IAAAA,YAAY,EAAE,CAACC,WAAD,EAAcC,MAAd,KAAyB;AACnC,aAAOH,QAAQ,CAAC;AACZI,QAAAA,IAAI,EAAEjG,gBAAgB,CAACkG,aADX;AAEZC,QAAAA,GAAG,EAAE;AACDH,UAAAA,MAAM,EAAEA,MADP;AAEDD,UAAAA,WAAW,EAAEA;AAFZ;AAFO,OAAD,CAAf;AAQH,KAbE;AAcHlC,IAAAA,QAAQ,EAAGsC,GAAD,IAAS;AACf,aAAON,QAAQ,CAAC,IAAI9F,WAAJ,GAAkBqG,UAAlB,CAA6BtG,SAAS,CAACuG,IAAV,CAAeC,WAA5C,EAAyDH,GAAzD,CAAD,CAAf;AAEH,KAjBE;AAkBHI,IAAAA,aAAa,EAAGJ,GAAD,IAAS;AACpB,aAAON,QAAQ,CAAC,IAAI9F,WAAJ,GAAkByG,YAAlB,CAA+B5G,WAAW,CAACyG,IAAZ,CAAiBI,QAAhD,EAA0DN,GAA1D,CAAD,CAAf;AAEH,KArBE;AAsBHO,IAAAA,aAAa,EAAGP,GAAD,IAAS;AACpB,aAAON,QAAQ,CAAC,IAAI9F,WAAJ,GAAkBqG,UAAlB,CAA6BtG,SAAS,CAAC6G,IAAV,CAAeC,eAA5C,EAA6DT,GAA7D,EAAkE,IAAlE,CAAD,CAAf;AAEH,KAzBE;AA0BHU,IAAAA,aAAa,EAAE,CAACC,IAAD,EAAOC,MAAP,EAAeC,IAAf,KAAwB;AACnCnB,MAAAA,QAAQ,CAAC;AACLI,QAAAA,IAAI,EAAE/F,aAAa,CAAC+G,UADf;AAELd,QAAAA,GAAG,EAAE;AACDW,UAAAA,IAAI,EAAEA,IADL;AAEDC,UAAAA,MAAM,EAAEA,MAFP;AAGDG,UAAAA,KAAK,EAAEF;AAHN;AAFA,OAAD,CAAR;AAQH;AAnCE,GAAP;AAwCH,CAzCD;;AA2CA,eAAerH,UAAU,CAACD,OAAO,CAC7B6F,eAD6B,EAE7BK,kBAF6B,CAAP,CAGxBjF,UAHwB,CAAD,CAAzB","sourcesContent":["/*\r\n    ./client/components/App.jsx\r\n*/\r\n\r\nimport 'leaflet/dist/leaflet.css';\r\nimport React from 'react';\r\nimport { slide as Menu } from 'react-burger-menu';\r\nimport 'react-leaflet-markercluster/dist/styles.min.css'; // sass\r\nimport Loadable from 'react-loadable';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport CommandList from '../../../../Shared/CommandList.js';\r\nimport { Translator } from '../../../../Shared/index.js';\r\nimport QueryList from '../../../../Shared/QueryList.js';\r\nimport { BaseService } from '../../../../App/index.js';\r\nimport LIGHTBOX_ACTIONS from '../../../../Components/ImageLightbox/actions.js';\r\nimport BodyLoader from '../../../../Components/Loader/BodyLoader/index.jsx';\r\nimport MODAL_ACTIONS from '../../../../Components/WrapperAuth/actions.js';\r\nimport SearchItemDTO from './../../../../Shared/DTO/Item/SearchItemDTO.js';\r\n\r\n\r\nconst queryString = require('query-string');\r\n\r\n\r\n\r\n\r\nconst SearchMap = Loadable({\r\n  loader: () =>  import('./../SearchMap/index.jsx') ,\r\n  loading() {\r\n      return  <BodyLoader zIndex={3} height=\"60vh\" size=\"100px\"/>\r\n  }\r\n});\r\nconst FilterSearch = Loadable({\r\n    loader: () =>  import('./../FilterSearch/index.jsx') ,\r\n    loading() {\r\n        return  <BodyLoader zIndex={3} height=\"85vh\" size=\"100px\"/>\r\n    }\r\n  });\r\n  const ItemsSlider = Loadable({\r\n  loader: () =>  import('../../Components/ItemsSlider/index.jsx') ,\r\n  loading() {\r\n      return  <BodyLoader zIndex={3} height=\"25vh\" size=\"100px\"/>\r\n  }\r\n});\r\n\r\n\r\n\r\nclass ItemSearch extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {};\r\n        this.state.search = new SearchItemDTO()\r\n        this.state.zoom = 13\r\n        this.state.validation = [];\r\n        this.state.latitude = 0;\r\n        this.state.longitude = 0;\r\n        this.state.result = [];\r\n        this.state.radius = 1000;\r\n        this.state.aggs = {};\r\n        this.state.categories = [];\r\n        this.state.isLoading = true;\r\n        this.state.positionOn = false;\r\n        this.state.catAbovePin = [];\r\n        this.state.currentElement = undefined\r\n        this.state.currentPosition = undefined\r\n        this.state.positionCenter = []\r\n\r\n        this.state.currentIndex = undefined\r\n        this.refSlider = {};\r\n\r\n    }\r\n\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (this.props.location.search != nextProps.location.search) {\r\n            this.loadFunc(this.nextProps)\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadFunc(this.props)\r\n    }\r\n    showAbovePin(catOptions) {\r\n        this.setState({\r\n            catAbovePin: catOptions\r\n        })\r\n    }\r\n\r\n    loadFunc(props) {\r\n        this.setState({ isLoading: true })\r\n\r\n        const parsed = queryString.parse(location.search);\r\n\r\n        this.state.search.distance = parsed.rad ? parsed.rad : '1km';\r\n        if (this.state.search.distance.indexOf('m') > 0) {\r\n            this.state.radius = Number(this.state.search.distance.split('m')[0])\r\n        }\r\n        if (this.state.search.distance.indexOf('km') > 0) {\r\n            this.state.radius = Number(this.state.search.distance.split('km')[0]) * 1000\r\n        }\r\n\r\n        this.setState({\r\n            radius: this.state.radius\r\n        })\r\n        if (this.state.radius > 6000) {\r\n            this.state.zoom = 12\r\n        }\r\n        if (this.state.radius > 9000) {\r\n            this.state.zoom = 11\r\n        }\r\n        if (this.state.radius > 20000) {\r\n            this.state.zoom = 10\r\n        }\r\n        this.setState({\r\n            zoom: this.state.zoom\r\n        })\r\n        this.state.search.lat = parsed.lat ? parsed.lat : this.props.auth.user.latitude;\r\n        this.state.search.lon = parsed.lon ? parsed.lon : this.props.auth.user.longitude;\r\n        this.state.search.freetext = parsed.q;\r\n        this.state.search.category_id = parsed.category_id;\r\n        this.state.search.tag = parsed.tag != \"\" ? JSON.parse(parsed.tag) : undefined\r\n        this.state.search.startDate = parsed.startDate != undefined && parsed.startDate != '' ? parsed.startDate : undefined;\r\n        this.state.search.endDate = parsed.endDate != undefined && parsed.endDate != '' ? parsed.endDate : undefined\r\n        this.state.search.createdInterval = parsed.createdInterval != undefined && parsed.createdInterval != '' ? parsed.createdInterval : undefined\r\n        this.state.search.catOptions = parsed.catOptions != undefined && parsed.catOptions != '' && JSON.parse(parsed.catOptions) != {} ? JSON.parse(parsed.catOptions) : undefined\r\n\r\n        this.setState({\r\n            search: this.state.search,\r\n            currentPosition: [ this.state.search.lat,this.state.search.lon],\r\n            positionCenter:[ this.state.search.lat,this.state.search.lon]\r\n        })\r\n        this.props.getItems(this.state.search).then(succ => {\r\n            this.setState({ isLoading: false })\r\n            console.log(succ.data.items)\r\n            let result = JSON.parse(succ.data.items)\r\n            console.log(result)\r\n\r\n            this.setState({\r\n                aggs: succ.data.aggs,\r\n                result: result\r\n            })\r\n        })\r\n    }\r\n\r\n    setColor(categories) {\r\n\r\n        this.setState({\r\n            categories: categories\r\n        })\r\n    }\r\n\r\n    init() {\r\n        this.tran = Translator(this.props.codeDict.data.LABEL, this.props.lang);\r\n\r\n    }\r\n\r\n\r\n\r\n    setCurrentElement(element) {\r\n        this.setState({\r\n            currentElement: element,\r\n            currentPosition: [element.latitude, element.longitude],\r\n            zoom: 18\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const tran = Translator(this.props.codeDict.data.LABEL, this.props.lang);\r\n        const phTrans = Translator(this.props.codeDict.data.PLACEHOLDER, this.props.lang);\r\n\r\n\r\n\r\n\r\n        //</Marker>\r\n\r\n        return (\r\n            <div id=\"outer-container\" style={{ position: \"relative\", overflowX: 'hidden' }}> <Menu isOpen={true} styles={{\r\n                bmBurgerButton: {\r\n                    fontSize: '17px',\r\n                    left: '18px',\r\n                }\r\n            }} width={'25%'} customBurgerIcon={<span  ><i class=\"fa fa-filter\" style={{ fontSize: '20px' }}></i><br /><span className=\"g-line-height-1_0\">{this.state.result.length}</span></span>}>\r\n                <FilterSearch aggs={this.state.aggs} colorSet={this.setColor.bind(this)} isLoading={this.state.isLoading} showAbovePin={this.showAbovePin.bind(this)} />\r\n            </Menu >\r\n\r\n                <div id=\"page-wrap\">{(this.props.loader.BODY_PROGRESS < 100 || this.state.isLoading) ? <BodyLoader zIndex={3} height=\"85vh\" size=\"100px\" progress={this.props.loader.BODY_PROGRESS} /> :\r\n                    <div>\r\n                        <SearchMap distance={this.state.search.distance}items={this.state.result} setCurrentElement={this.setCurrentElement.bind(this)}  currentPosition={this.state.currentPosition} positionCenter={this.state.positionCenter} currentElement={this.state.currentElement} catAbovePin={this.state.catAbovePin} categories={this.state.categories}  >\r\n                        </SearchMap>\r\n                        <ItemsSlider elementsNumber={5} items={this.state.result} currentElement={this.state.currentElement}  setCurrentElement={this.setCurrentElement.bind(this)}  />\r\n\r\n                    </div>}</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n            </div >\r\n\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    //console.log(state);\r\n\r\n    return {\r\n        codeDict: state.DictionaryReducer,\r\n        lang: state.LanguageReducer,\r\n        auth: state.AuthReducer,\r\n        loader: state.LoaderReducer\r\n\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n\r\n\r\n\r\n        openLightbox: (activeImage, images) => {\r\n            return dispatch({\r\n                type: LIGHTBOX_ACTIONS.OPEN_LIGHTBOX,\r\n                dto: {\r\n                    images: images,\r\n                    activeImage: activeImage\r\n                }\r\n            })\r\n\r\n        },\r\n        getItems: (dto) => {\r\n            return dispatch(new BaseService().queryThunt(QueryList.Item.SEARCH_ITEM, dto));\r\n\r\n        },\r\n        createNewItem: (dto) => {\r\n            return dispatch(new BaseService().commandThunt(CommandList.Item.NEW_ITEM, dto));\r\n\r\n        },\r\n        getUserImages: (dto) => {\r\n            return dispatch(new BaseService().queryThunt(QueryList.Blob.GET_USER_IMAGES, dto, null))\r\n\r\n        },\r\n        openUserModal: (open, action, item) => {\r\n            dispatch({\r\n                type: MODAL_ACTIONS.OPEN_MODAL,\r\n                dto: {\r\n                    open: open,\r\n                    action: action,\r\n                    param: item\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ItemSearch));"],"file":"index.js"}