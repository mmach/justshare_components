{"version":3,"sources":["../../../../../src/Scenes/Items/Scenes/SearchMap/index.jsx"],"names":["L","React","geolocated","Circle","Map","Marker","TileLayer","Tooltip","MarkerClusterGroup","connect","withRouter","Row","ellipsis","CommandList","Translator","QueryList","BaseService","WEB_CONFIG","LIGHTBOX_ACTIONS","MODAL_ACTIONS","SearchItemDTO","radiusIcon","queryString","require","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","SearchMap","Component","constructor","state","search","zoom","validation","positionOn","refSlider","componentWillReceiveProps","nextProps","currentElement","undefined","props","setState","id","init","tran","codeDict","data","LABEL","lang","showValue","item","console","log","category_link","catOption","cat_opt","type","selectValue","singleValue","value","cat_opt_temp","zoomIn","parsed","parse","location","rad","indexOf","Number","distance","split","stringified","stringify","sort","history","push","zoomOut","setPositionOn","pinClick","event","result","items","forEach","element","index","setCurrentElement","slickGoTo","setPosition","lon","latlng","lng","lat","render","phTrans","PLACEHOLDER","radius","auth","user","setLonLat","latitude","longitude","positionCenter","createClusterCustomIcon","cluster","divIcon","html","getChildCount","className","iconSize","iconAnchor","popupAnchor","shadowSize","shadowAnchor","currentItem","png","category","icon","currentIcon","map","bind","currentPosition","ref","categories","filter","cat","length","color","itemCategoryOption","is_on_pin_map","catAbovePin","myIcon","img","blobs","BLOB_URL","NODE_ENV","blob_min_id","name","cap","res","el","co_id","zIndex","position","width","height","fontSize","maxWidth","mapStateToProps","DictionaryReducer","LanguageReducer","AuthReducer","loader","LoaderReducer","offerItem","NewOfferItemReducer","mapDispatchToProps","dispatch","openLightbox","activeImage","images","OPEN_LIGHTBOX","dto","createNewItem","commandThunt","Item","NEW_ITEM","getUserImages","queryThunt","Blob","GET_USER_IMAGES","openUserModal","open","action","OPEN_MODAL","param","positionOptions","enableHighAccuracy","userDecisionTimeout"],"mappings":"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","sourcesContent":["/*\r\n    ./client/components/App.jsx\r\n*/\r\n\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport React from 'react';\r\nimport { geolocated } from 'react-geolocated';\r\nimport { Circle, Map, Marker, TileLayer, Tooltip } from 'react-leaflet';\r\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\r\nimport 'react-leaflet-markercluster/dist/styles.min.css'; // sass\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Row } from 'reactstrap';\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport ellipsis from 'text-ellipsis';\r\nimport CommandList from '../../../../Shared/CommandList.js';\r\nimport { Translator } from '../../../../Shared/index.js';\r\nimport QueryList from '../../../../Shared/QueryList.js';\r\nimport { BaseService } from '../../../../App/index.js';\r\nimport WEB_CONFIG from '../../../../config.js';\r\nimport LIGHTBOX_ACTIONS from '../../../../Components/ImageLightbox/actions.js';\r\nimport MODAL_ACTIONS from '../../../../Components/WrapperAuth/actions.js';\r\nimport SearchItemDTO from './../../../../Shared/DTO/Item/SearchItemDTO.js';\r\nimport radiusIcon from './../../../../assets/img/radius.png';\r\n\r\n\r\n\r\nconst queryString = require('query-string');\r\n\r\n\r\n\r\n\r\n//import { Map } from 'react-leaflet';\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\n\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png')\r\n});\r\n\r\n\r\n\r\n\r\n\r\nclass SearchMap extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {};\r\n        this.state.search = new SearchItemDTO()\r\n        this.state.zoom = 13\r\n        this.state.validation = [];\r\n   \r\n        this.state.positionOn = false;\r\n     \r\n        this.refSlider = {};\r\n\r\n    }\r\n\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if(nextProps.currentElement!=undefined && this.props.currentElement==undefined )\r\n        {\r\n            this.setState({\r\n                zoom: 16\r\n            })\r\n        }\r\n        if (this.props.currentElement!=undefined && this.props.currentElement.id != nextProps.currentElement.id) {\r\n            this.setState({\r\n                zoom: 16\r\n            })\r\n        }\r\n    }\r\n\r\n  \r\n    init() {\r\n        \r\n        this.tran = Translator(this.props.codeDict.data.LABEL, this.props.lang);\r\n\r\n    }\r\n\r\n\r\n    showValue(item) {\r\n\r\n        console.log(item)\r\n        if (item.category_link.catOption.cat_opt.type == \"SELECT\") {\r\n            return this.selectValue(item);\r\n        }\r\n        else if (item.category_link.catOption.cat_opt.type == \"MULTI_SELECT\") {\r\n            return this.selectValue(item);\r\n\r\n        }\r\n        else if (item.category_link.catOption.cat_opt.type == \"SINGLE\") {\r\n            return this.singleValue(item);\r\n        }\r\n        else if (item.category_link.catOption.cat_opt.type == \"GEOCOORDINATE\") {\r\n            return \"TO_DOOOOO\"\r\n        }\r\n        else if (item.category_link.catOption.cat_opt.type == \"BETWEEN\") {\r\n            return \"TO_DOOOOO\"\r\n        }\r\n        else if (item.category_link.catOption.cat_opt.type == \"IMAGE\") {\r\n            return \"TO_DOOOOO\"\r\n        } else {\r\n            ; return item.value;\r\n        }\r\n    }\r\n    singleValue(item) {\r\n        return item.value;\r\n    }\r\n    selectValue(item) {\r\n        return item.cat_opt_temp[\"value_\" + this.props.lang];\r\n    }\r\n\r\n    zoomIn() {\r\n        const parsed = queryString.parse(location.search);\r\n        let rad = '';\r\n        if (parsed.rad.indexOf('m') > 0 && parsed.rad.indexOf('km') < 1) {\r\n            rad = Number(this.props.distance.split('m')[0]) + 100\r\n            rad = rad + 'm'\r\n        }\r\n        if (parsed.rad.indexOf('km') > 0) {\r\n            rad = Number(this.props.distance.split('km')[0]) + 1;\r\n\r\n            rad = rad + 'km'\r\n        }\r\n        parsed.rad = rad;\r\n        const stringified = queryString.stringify(parsed, { sort: false });\r\n\r\n        this.props.history.push('/search?' + stringified);\r\n    }\r\n    zoomOut() {\r\n        const parsed = queryString.parse(location.search);\r\n        let rad = '';\r\n        if (parsed.rad.indexOf('m') > 0 && parsed.rad.indexOf('km') < 1) {\r\n            rad = Number(this.props.distance.split('m')[0]) - 100;\r\n            if (rad == 0) {\r\n                rad = 100\r\n            }\r\n            rad = rad + 'm'\r\n        }\r\n        if (parsed.rad.indexOf('km') > 0) {\r\n            rad = Number(this.props.distance.split('km')[0]) - 1;\r\n            if (rad == 0) {\r\n                rad = '900m';\r\n            } else {\r\n                rad = rad + 'km'\r\n            }\r\n        }\r\n        parsed.rad = rad;\r\n        const stringified = queryString.stringify(parsed, { sort: false });\r\n\r\n        this.props.history.push('/search?' + stringified);\r\n    }\r\n\r\n    setPositionOn() {\r\n        this.setState({\r\n            positionOn: !this.state.positionOn\r\n        })\r\n    }\r\n\r\n    pinClick(event) {\r\n        let id = event;\r\n        let result = this.props.items.forEach((element, index) => {\r\n            if (element.id == id) {\r\n                this.props.setCurrentElement(element)\r\n\r\n              \r\n                this.refSlider.slickGoTo(index);\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    setPosition(event) {\r\n\r\n        if (this.state.positionOn == false) {\r\n            return;\r\n        }\r\n        const parsed = queryString.parse(location.search);\r\n        parsed.lon = event.latlng.lng;\r\n        parsed.lat = event.latlng.lat;\r\n        const stringified = queryString.stringify(parsed, { sort: false });\r\n        this.setState({\r\n            positionOn: false\r\n        })\r\n        this.props.history.push('/search?' + stringified);\r\n\r\n    }\r\n\r\n    render() {\r\n        const tran = Translator(this.props.codeDict.data.LABEL, this.props.lang);\r\n        const phTrans = Translator(this.props.codeDict.data.PLACEHOLDER, this.props.lang);\r\n        let radius=0;\r\n        if (this.props.distance.indexOf('m') > 0) {\r\n            radius = Number(this.props.distance.split('m')[0])\r\n        }\r\n        if (this.props.distance.indexOf('km') > 0) {\r\n           radius = Number(this.props.distance.split('km')[0]) * 1000\r\n        }\r\n\r\n        let latlng = [0, 0];\r\n        if (this.props.auth && this.props.auth.user) {\r\n            if (this.state.setLonLat == 1) {\r\n                latlng = [this.state.latitude, this.state.longitude];\r\n            } else if ( this.props.positionCenter[0] != undefined &&  this.props.positionCenter[1] != undefined) {\r\n                latlng = this.props.positionCenter;\r\n            } else {\r\n                latlng = [this.props.auth.user.latitude, this.props.auth.user.longitude];\r\n            }\r\n        } else if (this.state.latitude && this.state.longitude) {\r\n            latlng = [this.state.latitude, this.state.longitude]\r\n        }\r\n\r\n        const createClusterCustomIcon = function (cluster) {\r\n            return L.divIcon({\r\n                html: `\r\n                <svg viewBox=\"0 0 80 80\" width=\"40\" height=\"70\" style=\"overflow: visible;\">\r\n                    <defs>\r\n                        <filter height=\"200%\" width=\"200%\" y=\"-50%\" x=\"-50%\" id=\"svg_5_blur\">\r\n                            <feGaussianBlur stdDeviation=\"4.7\" in=\"SourceGraphic\"/>\r\n                        </filter>\r\n                        <filter height=\"200%\" width=\"200%\" y=\"-50%\" x=\"-50%\" id=\"svg_9_blur\">\r\n                            <feGaussianBlur stdDeviation=\"3.9\" in=\"SourceGraphic\"/>\r\n                        </filter>\r\n                    </defs>\r\n                    <style>\r\n                        .small { font: italic 13px sans-serif; }\r\n                        .heavy { font: bold 30px sans-serif; text-align:center }\r\n                    \r\n                        /* Note that the color of the text is set with the    *\r\n                        * fill property, the color property is for HTML only */\r\n                        .Rrrrr { font: italic 40px serif; fill: red; }\r\n                  </style>\r\n                \r\n                    <g>\r\n               \r\n                    <ellipse filter=\"url(#svg_5_blur)\" opacity=\"0.5\" ry=\"11\" rx=\"27.5\" id=\"svg_5\" cy=\"74\" cx=\"35.5\" stroke-width=\"1.5\" stroke=\"#8e8e8e\" fill=\"#a07d7d\"/>\r\n                    <ellipse filter=\"url(#svg_9_blur)\" opacity=\"0.3\" ry=\"8\" rx=\"9\" id=\"svg_9\" cy=\"74\" cx=\"35.5\" stroke-width=\"1.5\" stroke=\"#8e8e8e\" fill=\"#665151\"/>\r\n                    <ellipse stroke=\"${'#666'}\" ry=\"33\" rx=\"34\" id=\"svg_2\" cy=\"34.9375\" cx=\"35.5\" stroke-width=\"1.5\" fill=\"${'#666'}\"/>\r\n                    <ellipse stroke=\"${'#666'}\" ry=\"25.235295\" rx=\"26\" id=\"svg_3\" cy=\"35.702206\" cx=\"35.5\" fill-opacity=\"null\" stroke-width=\"1.5\" fill=\"#fff\"/>\r\n                    <text font-size=\"11\" stroke-width=\"0\" stroke=\"#000\" alignment-baseline=\"middle\" text-anchor=\"middle\" class=\"heavy\" x=\"35\" y=\"38\">${cluster.getChildCount()}</text>\r\n                    </g>\r\n                </svg>`,\r\n                className: 'marker-cluster-custom',\r\n                iconSize: [40, 40],\r\n                iconAnchor: [20, 20], // point of the icon which will correspond to marker's location\r\n                popupAnchor: [0, -35],\r\n                shadowUrl: null,\r\n                shadowSize: null,\r\n                shadowAnchor: null\r\n            });\r\n        }\r\n\r\n        let currentItem = <span></span>\r\n        if (this.props.currentElement) {\r\n            var png = require(`./../../../../assets/markers/${this.props.currentElement.category.icon}.png`)\r\n            let currentIcon = L.divIcon({\r\n                html: `<div class=\" text-center\" style=\"z-index:10000\">\r\n                            \r\n                            \r\n                        <svg class=\" pin_hover\" viewBox=\"0 0 55 55\" width=\"40\" height=\"40\" style=\"overflow: visible;margin-bottom:-45px\">\r\n                            <defs>\r\n                                <filter height=\"200%\" width=\"200%\" y=\"-50%\" x=\"-50%\" id=\"svg_5_blur\">\r\n                                    <feGaussianBlur stdDeviation=\"4.7\" in=\"SourceGraphic\"/>\r\n                                </filter>\r\n                                <filter height=\"200%\" width=\"200%\" y=\"-50%\" x=\"-50%\" id=\"svg_9_blur\">\r\n                                    <feGaussianBlur stdDeviation=\"3.9\" in=\"SourceGraphic\"/>\r\n                                </filter>\r\n                            </defs>\r\n                            <style>\r\n                                .small { font: italic 13px sans-serif; }\r\n                                .heavyText {font: 500 30px sans-serif; text-align:center }\r\n                            \r\n                                /* Note that the color of the text is set with the    *\r\n                                * fill property, the color property is for HTML only */\r\n                                .Rrrrr { font: italic 40px serif; fill: red; }\r\n                          </style>\r\n                        \r\n                            <g>\r\n                            <rect stroke=\"\" transform=\"rotate(45 34.75000000000003,52.249999999999986) \" id=\"svg_7\" height=\"38.606601\" width=\"42\" y=\"32.9467\" x=\"13.75\" fill-opacity=\"null\" stroke-opacity=\"null\" stroke-width=\"1.5\" fill=\"\"/>\r\n                            <ellipse stroke=\"\" ry=\"33\" rx=\"34\" id=\"svg_2\" cy=\"34.9375\" cx=\"35.5\" stroke-width=\"1.5\" fill=\"\"/>\r\n                            <ellipse stroke=\"\" ry=\"25.235295\" rx=\"26\" id=\"svg_3\" cy=\"35.702206\" cx=\"35.5\" fill-opacity=\"null\" stroke-width=\"1.5\" fill=\"#fff\"/>\r\n                            <image xlink:href=\"${png}\" id=\"svg_4\" height=\"32\" width=\"32\" y=\"18\" x=\"20\"/>\r\n                           </g>\r\n                        </svg>\r\n                        <svg class=\"\" viewBox=\"0 0 55 55\" width=\"40\" height=\"40\" style=\"overflow: visible;\">\r\n                            <defs>\r\n                                <filter height=\"200%\" width=\"200%\" y=\"-50%\" x=\"-50%\" id=\"svg_5_blur\">\r\n                                    <feGaussianBlur stdDeviation=\"4.7\" in=\"SourceGraphic\"/>\r\n                                </filter>\r\n                                <filter height=\"200%\" width=\"200%\" y=\"-50%\" x=\"-50%\" id=\"svg_9_blur\">\r\n                                    <feGaussianBlur stdDeviation=\"3.9\" in=\"SourceGraphic\"/>\r\n                                </filter>\r\n                            </defs>\r\n                            <style>\r\n                                .small { font: italic 13px sans-serif; }\r\n                                .heavyText {font: 500 30px sans-serif; text-align:center }\r\n                            \r\n                                /* Note that the color of the text is set with the    *\r\n                                * fill property, the color property is for HTML only */\r\n                                .Rrrrr { font: italic 40px serif; fill: red; }\r\n                          </style>\r\n                        \r\n                            <g>\r\n                             <ellipse filter=\"url(#svg_5_blur)\" opacity=\"0.4\" ry=\"11\" rx=\"27.5\" id=\"svg_5\" cy=\"83\" cx=\"35.5\" stroke-width=\"1.5\" stroke=\"#8e8e8e\" fill=\"#a07d7d\"/>\r\n                            <ellipse filter=\"url(#svg_9_blur)\" opacity=\"0.3\" ry=\"8\" rx=\"9\" id=\"svg_9\" cy=\"83\" cx=\"35.5\" stroke-width=\"1.5\" stroke=\"#8e8e8e\" fill=\"#665151\"/>\r\n                        \r\n                           </g>\r\n                        </svg>\r\n                        </div>`,\r\n\r\n                iconSize: [10, 18],\r\n                iconAnchor: [24, 78], // point of the icon which will correspond to marker's location\r\n                popupAnchor: [-5, -12],\r\n                className: 'marker-cluster-custom'\r\n\r\n            });\r\n\r\n\r\n            currentItem = (<Marker openPopup={true} position={[this.props.currentElement.latitude, this.props.currentElement.longitude]} icon={currentIcon} >\r\n\r\n            </Marker>)\r\n        }\r\n        //</Marker>\r\n        let map = <Map zoomControl={false} onclick={this.setPosition.bind(this)}\r\n            minZoom={6} className=\"size-map-60vh\" center={this.props.currentPosition != undefined ?this.props.currentPosition: latlng} zoom={this.state.zoom}\r\n            ref={(ref) => {\r\n                this.map = ref;\r\n\r\n            }}\r\n\r\n        >\r\n            <Circle opacity={0.5} center={latlng} fillColor=\"#666\" color=\"#e74c3c\" fillOpacity={0.1} radius={radius} strokeWidth={1} />\r\n\r\n\r\n            <TileLayer\r\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            />\r\n            <MarkerClusterGroup iconCreateFunction={createClusterCustomIcon} >\r\n                {this.props.categories.filter(item => {\r\n                    return this.props.items.filter(items => {\r\n                        return items.categories.filter(cat => {\r\n                            return item.id == cat.id\r\n                        }).length > 0\r\n                    }).length > 0\r\n\r\n                }).map(category => {\r\n\r\n                    let result = this.props.items ? this.props.items.filter(item => {\r\n\r\n                        if (this.props.currentElement && item.id == this.props.currentElement.id) {\r\n                            return false;\r\n                        }\r\n                        let result = item.categories.filter(cat => {\r\n                            return category.id == cat.id\r\n                        })\r\n                        if (result.length > 0) {\r\n                        }\r\n                        return result.length > 0\r\n                    }).map(item => {\r\n\r\n                        //  console.log(item);\r\n                        let color = category.color;\r\n                        let cat = item.itemCategoryOption.filter(category => { return category.category_link.is_on_pin_map == null ? category.category_link.catOption.is_on_pin_map : category.category_link.is_on_pin_map })[0];\r\n                        var png = require(`./../../../../assets/markers/${item.category.icon}.png`)\r\n                        console.log(this.props.catAbovePin);\r\n                        let myIcon = L.divIcon({\r\n                            html: `<div class=\" text-center\">\r\n                            \r\n                            \r\n                        <svg class=\" pin_hover\" viewBox=\"0 0 80 80\" width=\"40\" height=\"40\" style=\"overflow: visible;margin-bottom:-45px\">\r\n                            <defs>\r\n                                <filter height=\"200%\" width=\"200%\" y=\"-50%\" x=\"-50%\" id=\"svg_5_blur\">\r\n                                    <feGaussianBlur stdDeviation=\"4.7\" in=\"SourceGraphic\"/>\r\n                                </filter>\r\n                                <filter height=\"200%\" width=\"200%\" y=\"-50%\" x=\"-50%\" id=\"svg_9_blur\">\r\n                                    <feGaussianBlur stdDeviation=\"3.9\" in=\"SourceGraphic\"/>\r\n                                </filter>\r\n                            </defs>\r\n                            <style>\r\n                                .small { font: italic 13px sans-serif; }\r\n                                .heavyText {font: 500 30px sans-serif; text-align:center }\r\n                            \r\n                                /* Note that the color of the text is set with the    *\r\n                                * fill property, the color property is for HTML only */\r\n                                .Rrrrr { font: italic 40px serif; fill: red; }\r\n                          </style>\r\n                        \r\n                            <g>\r\n                            <rect stroke=\"${category.color}\" transform=\"rotate(45 34.75000000000003,52.249999999999986) \" id=\"svg_7\" height=\"38.606601\" width=\"42\" y=\"32.9467\" x=\"13.75\" fill-opacity=\"null\" stroke-opacity=\"null\" stroke-width=\"1.5\" fill=\"${color}\"/>\r\n                            <ellipse stroke=\"${category.color}\" ry=\"33\" rx=\"34\" id=\"svg_2\" cy=\"34.9375\" cx=\"35.5\" stroke-width=\"1.5\" fill=\"${category.color}\"/>\r\n                            <ellipse stroke=\"${category.color}\" ry=\"25.235295\" rx=\"26\" id=\"svg_3\" cy=\"35.702206\" cx=\"35.5\" fill-opacity=\"null\" stroke-width=\"1.5\" fill=\"#fff\"/>\r\n                            <image xlink:href=\"${png}\" id=\"svg_4\" height=\"32\" width=\"32\" y=\"18\" x=\"20\"/>\r\n                           </g>\r\n                        </svg>\r\n                        <svg class=\"\" viewBox=\"0 0 80 80\" width=\"40\" height=\"40\" style=\"overflow: visible;\">\r\n                            <defs>\r\n                                <filter height=\"200%\" width=\"200%\" y=\"-50%\" x=\"-50%\" id=\"svg_5_blur\">\r\n                                    <feGaussianBlur stdDeviation=\"4.7\" in=\"SourceGraphic\"/>\r\n                                </filter>\r\n                                <filter height=\"200%\" width=\"200%\" y=\"-50%\" x=\"-50%\" id=\"svg_9_blur\">\r\n                                    <feGaussianBlur stdDeviation=\"3.9\" in=\"SourceGraphic\"/>\r\n                                </filter>\r\n                            </defs>\r\n                            <style>\r\n                                .small { font: italic 13px sans-serif; }\r\n                                .heavyText {font: 500 30px sans-serif; text-align:center }\r\n                            \r\n                                /* Note that the color of the text is set with the    *\r\n                                * fill property, the color property is for HTML only */\r\n                                .Rrrrr { font: italic 40px serif; fill: red; }\r\n                          </style>\r\n                        \r\n                            <g>\r\n                             <ellipse filter=\"url(#svg_5_blur)\" opacity=\"0.4\" ry=\"11\" rx=\"27.5\" id=\"svg_5\" cy=\"83\" cx=\"35.5\" stroke-width=\"1.5\" stroke=\"#8e8e8e\" fill=\"#a07d7d\"/>\r\n                            <ellipse filter=\"url(#svg_9_blur)\" opacity=\"0.3\" ry=\"8\" rx=\"9\" id=\"svg_9\" cy=\"83\" cx=\"35.5\" stroke-width=\"1.5\" stroke=\"#8e8e8e\" fill=\"#665151\"/>\r\n                        \r\n                           </g>\r\n                        </svg>\r\n                        </div>`,\r\n\r\n                            iconSize: [10, 18],\r\n                            iconAnchor: [16, 60], // point of the icon which will correspond to marker's location\r\n                            popupAnchor: [-5, -12],\r\n                            className: 'marker-cluster-custom'\r\n\r\n                        });\r\n                        // let img = item.blobs[0] ? `data:${item.blobs[0].blob_min.type};base64,${item.blobs[0].blob_min.blob}` : ''\r\n                        let img = item.blobs[0] ? WEB_CONFIG.BLOB_URL[NODE_ENV] + '/blob/' + item.blobs[0].blob_min_id : ''\r\n                        //console.log('aksdhbjkasdbkjasdasbdbhhjbdsahbjbhsadhjsadjhbsb')\r\n                        return (<Marker openPopup={true} position={[item.latitude, item.longitude]} icon={myIcon} data-key={item.id} onClick={() => { this.pinClick.bind(this)(item.id) }}>\r\n\r\n                            <Tooltip offset={[2, -47]} direction=\"top\">\r\n\r\n                                <div className=\"text-center\">\r\n                                    <h5 class=\"h6 g-font-size-8 text-uppercase g-letter-spacing-1 g-font-weight-600 text-uppercase   g-mb-1\" title={item.name}>{ellipsis(item.name, 25)}</h5>\r\n\r\n                                    {\r\n                                        this.props.catAbovePin.length > 0 ? <div className=\"text-center\"> {this.props.catAbovePin.map(cap => {\r\n                                            let res = item.itemCategoryOption.filter(el => { return el.category_link.co_id == cap });\r\n                                            if (res.length > 0) {\r\n                                                return <span class=\"g-bg-white g-px-5 g-py-2 \"> {this.showValue(res[0])}<br /></span>\r\n                                            } else {\r\n                                                return <span></span>\r\n                                            }\r\n                                        })} </div> : <div></div>\r\n                                    }\r\n                                    {cat != undefined ? <span class=\"g-bg-white g-px-5 g-py-2 \" > {this.showValue(cat)} </span> : <span></span>}\r\n                                </div>\r\n\r\n                            </Tooltip>\r\n                        </Marker>)\r\n                    }) : <span></span>\r\n                    return result;\r\n\r\n                })}\r\n            </MarkerClusterGroup>\r\n            {this.props.currentElement ?\r\n                currentItem\r\n                : <span></span>}\r\n\r\n        </Map>\r\n\r\n\r\n        return (\r\n            <div>\r\n                <div>\r\n\r\n                    <div>{map}\r\n                    </div></div>\r\n                <div onClick={this.setPositionOn.bind(this)} class={\"map-button-user g-cursor-pointer  \" + (this.state.positionOn == true ? \"g-bg-black\" : \"\")} style={{ zIndex: 900, position: \"absolute\" }}>\r\n                    <div className=\"map-button-user-icon\" style={{ width: '100%', height: '100%' }}>\r\n                    </div>\r\n                </div >\r\n\r\n\r\n                <div className=\"map-distance-btns\">\r\n                    <Row style={{ position: 'relative' }}>\r\n                        <div onClick={this.zoomOut.bind(this)} className=\"col-xs-4 map-distance-left-btn\">\r\n                            <span className=\"bm-icon\" style={{ width: '100%', height: '100%' }}><i class=\"fa fa-minus\" style={{ fontSize: '20px' }}></i></span> </div >\r\n                        <div className=\"col-xs-4 map-distance-label\" >\r\n                            <span className=\"bm-icon\" style={{ width: '100%', height: '100%' }}><img style={{ maxWidth: '50px' }} src={radiusIcon} /><br />\r\n                                <span className=\"g-line-height-1_0 g-font-size-14 text-center\">{this.props.distance}</span></span>\r\n                        </div >\r\n                        <div onClick={this.zoomIn.bind(this)} className=\"col-xs-4 map-distance-right-btn\"  >\r\n                            <span className=\"bm-icon\" style={{ width: '100%', height: '100%' }}>\r\n                                <i class=\"fa fa-plus\" style={{ fontSize: '20px' }}></i></span>\r\n\r\n                        </div >\r\n                    </Row>\r\n                </div>\r\n\r\n            </div >\r\n\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    //console.log(state);\r\n\r\n    return {\r\n        codeDict: state.DictionaryReducer,\r\n        lang: state.LanguageReducer,\r\n        auth: state.AuthReducer,\r\n        loader: state.LoaderReducer,\r\n        offerItem: state.NewOfferItemReducer\r\n\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n\r\n\r\n\r\n        openLightbox: (activeImage, images) => {\r\n            return dispatch({\r\n                type: LIGHTBOX_ACTIONS.OPEN_LIGHTBOX,\r\n                dto: {\r\n                    images: images,\r\n                    activeImage: activeImage\r\n                }\r\n            })\r\n\r\n        },\r\n      \r\n        createNewItem: (dto) => {\r\n            return dispatch(new BaseService().commandThunt(CommandList.Item.NEW_ITEM, dto));\r\n\r\n        },\r\n        getUserImages: (dto) => {\r\n            return dispatch(new BaseService().queryThunt(QueryList.Blob.GET_USER_IMAGES, dto, null))\r\n\r\n        },\r\n        openUserModal: (open, action, item) => {\r\n            dispatch({\r\n                type: MODAL_ACTIONS.OPEN_MODAL,\r\n                dto: {\r\n                    open: open,\r\n                    action: action,\r\n                    param: item\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default withRouter(geolocated({\r\n    positionOptions: {\r\n        enableHighAccuracy: false,\r\n    },\r\n    userDecisionTimeout: 5000,\r\n})(connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(SearchMap)));\r\n/*\r\n\r\n\r\n<div onClick={this.setPositionOn.bind(this)} class={\"map-button-group g-cursor-pointer\"} style={{ zIndex: 1000, position: \"absolute\" }}>\r\n<div className=\"map-button-group-icon\" style={{ width: '48px', height: '48px' }}>\r\n</div>\r\n</div >\r\n\r\n                <Menu width={'20%'} styles={{\r\n                    bmBurgerButton: {\r\n                        position: 'absolute',\r\n\r\n                        right: '18px',\r\n                        top: '5%',\r\n                        fontSize: '17px',\r\n                        textAlign: 'center'\r\n                    }\r\n\r\n                }} right customBurgerIcon={<span  ><i class=\"fa fa-bar-chart\" style={{ fontSize: '20px' }}></i><br /><span className=\"g-line-height-1_0\">{0}</span></span>}>\r\n                    <a id=\"home\" className=\"menu-item\" href=\"/\">Home</a>\r\n                    <a id=\"about\" className=\"menu-item\" href=\"/about\">About</a>\r\n                    <a id=\"contact\" className=\"menu-item\" href=\"/contact\">Contact</a>\r\n                    <a onClick={this.showSettings} className=\"menu-item--small\" href=\"\">Settings</a>\r\n                </Menu >*/\r\n\r\n\r\n\r\n/*\r\n\r\n\r\n   <Popup>\r\n\r\n                <div xs=\"9\" class=\"media g-brd-around g-brd-gray-light-v4 g-brd-left-3 g-brd-blue-left g-pa-5 rounded-0  g-mb-2\">\r\n\r\n                    <div class=\"media-body g-pl-5\">\r\n                        <Row>\r\n                            <Col xs=\"8\" >\r\n                                <h5 class=\"h6 g-font-size-11 text-uppercase g-letter-spacing-1 g-font-weight-600 text-uppercase  g-color-gray-dark-v4 g-mb-1\">{item.name}</h5>\r\n                                <label class=\"g-line-height-1_5 g-letter-spacing-1 g-mb-1 g-font-weight-500 g-font-size-9 form-control-label\">{item.category[\"category_\" + this.props.lang]}</label>\r\n                                <br />\r\n                                <span data-tag={item.user.id} onClick={this.goToUser.bind(this)} className=\"g-letter-spacing-1 text-nowrap g-color-blue g-cursor-pointer\" >\r\n                                    {item.user.name}\r\n                                </span>\r\n                            </Col>\r\n                            <Col xs=\"3\" className=\"g-pa-0 g-ma-0\" >\r\n                                {item.blobs[0] ?\r\n\r\n                                    <div class=\"js-fancybox d-block u-block-hover \" target=\"_blank\">\r\n\r\n\r\n                                        <span onClick={this.openImage.bind(this)} data-item={item.id} data-tag={item.blobs[0].blob_id} class={\" js-fancybox d-block u-block-hover u-block-hover--scale-down g-cursor-pointer\"} href=\"smooth-parallax-scroll/index.html\" >\r\n                                            <Img src={img} className={\"img-fluid u-block-hover__main u-block-hover__img \"} />\r\n\r\n                                        </span>\r\n                                    </div>\r\n                                    : <span></span>}\r\n                            </Col>\r\n                        </Row>\r\n                        <div className=\"g-pb-10\">\r\n                            <div class=\"d-flex justify-content-center text-center g-mb-8 g-mt-8\"><div class=\"d-inline-block align-self-center g-width-100 g-height-1  g-bg-gray-light-v3\"></div><span class=\"align-self-center text-uppercase  g-color-gray-dark-v2  g-color-gray-dark-v4 g-letter-spacing-2  g-mx-5  g-font-weight-600 g-font-size-9\">{tran.translate('MAP_PIN_DESCRIPTION_LABEL')}</span><div class=\"d-inline-block align-self-center g-width-100 g-height-1 g-bg-gray-light-v3\"></div></div>\r\n                            <Row>\r\n                                <PreviewItemOptions item={item} on_map={true} lang={this.props.lang} col_size=\"6\" />\r\n\r\n\r\n                            </Row>\r\n                        </div>\r\n                        {item.tags.slice(0, 6).map(item => {\r\n                            return <span class=\"u-label u-label--sm tag-map   g-px-10 g-mx-1 g-my-1 g-cursor-pointer\">{item.tag}</span>\r\n\r\n                        })}{\r\n                            item.tags.length > 6 ? <span className=\"g-pl-10\">{\"+\" + (item.tags.length - 6) + \" \" + tran.translate('MAP_MORE_TAGS_LABEL')}</span> : <span></span>\r\n                        } <span></span>\r\n                    </div>\r\n\r\n                </div>\r\n            </Popup>*/"],"file":"index.js"}