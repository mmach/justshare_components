{"version":3,"sources":["../../../../../../src/Scenes/Categories/Components/CategoryOptionTypes/FORM/CategoryOptionFormGEO.jsx"],"names":["React","geolocated","connect","uuidv4","QueryList","BaseService","MapForm","Translator","L","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","CategoryOptionFormGEO","Component","constructor","props","state","validation","geo","values","latitude","longitude","markers","onChange","console","log","catOption","category_link","category_id","id","result","cat_opt_id","cat_opt_temp","filter","item","order","val","cityId","element","type","col_id","countryId","countryValue","cityValue","address","getDropDownValues","value","map","lang","render","tran","codeDict","data","LABEL","phTrans","PLACEHOLDER","encodeURIComponent","categoryIcon","bind","mapStateToProps","DictionaryReducer","LanguageReducer","auth","AuthReducer","mapDispatchToProps","dispatch","getReverseGeocode","query","queryThunt","City","REVERSE_GEO","positionOptions","enableHighAccuracy","userDecisionTimeout"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { geolocated } from 'react-geolocated';\r\nimport { connect } from 'react-redux';\r\nimport uuidv4 from \"uuid/v4\";\r\nimport QueryList from '../../../../../Shared/QueryList';\r\nimport { BaseService } from '../../../../../App/Architecture/baseServices.js';\r\nimport MapForm from '../../../../../Components/MapForm/index.jsx';\r\nimport { Translator } from './../../../../../Shared/index.js';\r\n\r\n//import { Map } from 'react-leaflet';\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\n\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png')\r\n});\r\n\r\n\r\nclass CategoryOptionFormGEO extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {}\r\n        this.state.validation = [];\r\n        this.state.geo = this.props.values ? this.props.values : [0, 0];\r\n        this.state.latitude = this.state.geo[0];\r\n        this.state.longitude = this.state.geo[1]\r\n        this.state.markers = [];\r\n       \r\n\r\n    }\r\n\r\n\r\n    onChange(state) {\r\n        console.log(this.props)\r\n        console.log(this.props.catOption.category_link[0].category_id);\r\n        let id = this.props.catOption.id;\r\n        let result = [\r\n            { id: uuidv4(), cat_opt_id: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 6 })[0].id, val: state.cityId, element: id, type: 'GEO', catOption: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 6 })[0] ,col_id:this.props.catOption.category_link[0].id},\r\n            { id: uuidv4(), cat_opt_id: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 4 })[0].id, val: state.countryId, element: id, type: 'GEO', catOption: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 4 })[0] ,col_id:this.props.catOption.category_link[0].id},\r\n            { id: uuidv4(), cat_opt_id: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 3 })[0].id, val: state.countryValue, element: id, type: 'GEO', catOption: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 3 })[0] ,col_id:this.props.catOption.category_link[0].id},\r\n            { id: uuidv4(), cat_opt_id: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 2 })[0].id, val: state.latitude, element: id, type: 'GEO', catOption: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 2 })[0] ,col_id:this.props.catOption.category_link[0].id},\r\n            { id: uuidv4(), cat_opt_id: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 5 })[0].id, val: state.cityValue, element: id, type: 'GEO', catOption: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 5 })[0] ,col_id:this.props.catOption.category_link[0].id},\r\n            { id: uuidv4(), cat_opt_id: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 7 })[0].id, val: state.address, element: id, type: 'GEO', catOption: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 7 })[0] ,col_id:this.props.catOption.category_link[0].id},\r\n            { id: uuidv4(), cat_opt_id: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 1 })[0].id, val: state.longitude, element: id, type: 'GEO', catOption: this.props.catOption.cat_opt_temp.filter(item => { return item.order == 1 })[0] ,col_id:this.props.catOption.category_link[0].id}\r\n        ]\r\n\r\n\r\n        console.log(state)\r\n        console.log(this.props.catOption.cat_opt_temp);\r\n        //this.setState(state);\r\n        this.props.onChange(null, result)\r\n\r\n    }\r\n    getDropDownValues() {\r\n        return [{ id: '', value: '', type: \"\" }, ...this.props.catOption.cat_opt_temp.map(item => {\r\n            return { id: item.id, value: item[\"value_\" + this.props.lang], type: item[\"value_\" + this.props.lang] }\r\n        })];\r\n    }\r\n\r\n    /*  onChange(coordinate) {\r\n          console.log(coordinate)\r\n      }*/\r\n\r\n\r\n    render() {\r\n\r\n\r\n        const tran = Translator(this.props.codeDict.data.LABEL, this.props.lang);\r\n        const phTrans = Translator(this.props.codeDict.data.PLACEHOLDER, this.props.lang);\r\n\r\n\r\n        //zoom={this.state.zoom} onzoomend={this.onZoom.bind(this)} onClick={this.addMarker.bind(this)}\r\n        return (\r\n\r\n            <MapForm icon={encodeURIComponent(this.props.categoryIcon)} getFromUser={true} onChange={this.onChange.bind(this)} form_text={this.props.catOption[\"name_\" + this.props.lang]}></MapForm>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\r\n    return {\r\n        codeDict: state.DictionaryReducer,\r\n        lang: state.LanguageReducer,\r\n        auth: state.AuthReducer\r\n        //  catOptions: state.EditCategoryReducer\r\n\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n\r\n        getReverseGeocode: (query) => {\r\n            return dispatch(new BaseService().queryThunt(QueryList.City.REVERSE_GEO, { query: query }));\r\n        }\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default geolocated({\r\n    positionOptions: {\r\n        enableHighAccuracy: false,\r\n    },\r\n    userDecisionTimeout: 5000,\r\n})(connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(CategoryOptionFormGEO));\r\n"],"file":"CategoryOptionFormGEO.js"}