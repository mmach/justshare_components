{"version":3,"sources":["../../../../../../src/Scenes/Categories/Components/CategoryOptionTypes/SEARCH/CategoryOptionSearchSINGLE.jsx"],"names":["React","connect","HistogramSlider","Translator","CategoryOptionSearchSINGLE","Component","constructor","props","state","validation","optionFilter","values","undefined","onChange","event","setState","id","target","value","onClick","catOptionId","min","aggs","catOption","hist_values","buckets","max","getDropDownValues","setCurrentValues","resetSingle","onReset","render","tran","codeDict","data","LABEL","lang","phTrans","PLACEHOLDER","catOptions","filter","item","date","length","map","index","counter","console","log","JSON","stringify","display","width","borderRight","in","out","bind","float","mapStateToProps","DictionaryReducer","LanguageReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport HistogramSlider from '../../../../../Components/HistogramSlider/HistogramSlider.jsx';\r\nimport { Translator } from './../../../../../Shared/index.js';\r\n\r\n\r\n\r\n\r\n\r\nclass CategoryOptionSearchSINGLE extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {}\r\n        this.state.validation = [];\r\n        this.state.optionFilter = this.props.optionFilter;\r\n        this.state.values = undefined\r\n\r\n    }\r\n\r\n\r\n    onChange(event) {\r\n\r\n        this.setState({\r\n            id: event.target.value\r\n        })\r\n\r\n\r\n\r\n    }\r\n    onClick(event) {\r\n        if (this.state.values == undefined) {\r\n            return;\r\n        }\r\n        //let optionId = event.currentTarget.getAttribute('data-tag');\r\n        this.props.onChange(this.props.catOptionId + \"_SINGLE\", [{\r\n            min: this.props.aggs[this.props.catOptionId].catOption.hist_values.value[0].buckets[this.state.values[0]][2]\r\n            , max: this.props.aggs[this.props.catOptionId].catOption.hist_values.value[0].buckets[this.state.values[1]][2]\r\n        }])\r\n\r\n    }\r\n    getDropDownValues() {\r\n        //     return [{ id: '', value: '', type: \"\" }, ...this.props.catOption.cat_opt_temp.map(item => {\r\n        //       return { id: item.id, value: item[\"value_\" + this.props.lang], type: item[\"value_\" + this.props.lang] }\r\n        //    })];\r\n    }\r\n    setCurrentValues(value) {\r\n        if (value[0] >= value[1]) { return; }\r\n        this.setState({ values: value });\r\n    }\r\n\r\n    resetSingle() {\r\n        this.props.onReset(this.props.catOptionId + \"_SINGLE\");\r\n    }\r\n\r\n    render() {\r\n        const tran = Translator(this.props.codeDict.data.LABEL, this.props.lang);\r\n        const phTrans = Translator(this.props.codeDict.data.PLACEHOLDER, this.props.lang);\r\n        //     const link = this.props.catOption.category_link[0];\r\n        let catOption = this.props.catOptions.filter(item => { return item.id == this.props.catOptionId })[0];\r\n        const date = this.props.aggs[this.props.catOptionId].catOption.hist_values.value[0].buckets.length > 0 ?\r\n            this.props.aggs[this.props.catOptionId].catOption.hist_values.value[0].buckets.map((item, index) => {\r\n                return { id: item[0], value: item[2], counter: item[1] }\r\n            }) : [{ id: -1, value: 0, counter: 0 }];\r\n        let value = [0, date.length > 1 ? date.length - 1 : 1]\r\n        if (this.state.values != undefined) {\r\n            value = [this.state.values[0], this.state.values[1]]\r\n\r\n        }\r\n\r\n        console.log(JSON.stringify(this.state.optionFilter))\r\n        return (\r\n            <div className=\"list-group list-group-border-0 g-mt-10 \">\r\n                <div style={{ display: 'flex' }}>\r\n                    {date.length > 2 ?\r\n\r\n                        <div\r\n                            className=\"g-px-20 g-py-5\"\r\n                            style={{\r\n                                width: '100%',\r\n\r\n                                borderRight: '1px solid #d9d9d9',\r\n                            }}\r\n                        >\r\n                            <HistogramSlider\r\n                                colors={{\r\n                                    in: '#D7D8D8',\r\n                                    out: '#EEEEEE',\r\n                                }}\r\n                                label={\r\n                                    <div>Od : {date[value[0]].value}\r\n                                        <br />Do : {date[value[1]].value}\r\n                                    </div>\r\n                                }\r\n                                min={date[0].id}\r\n                                max={date[date.length - 1].id}\r\n                                step={date[date.length - 1] - date[0] / 100}\r\n                                value={value}\r\n                                distance={date[date.length - 1] - date[0]}\r\n                                data={date.map(item => { return item.counter * 1000 })}\r\n                                onChange={this.setCurrentValues.bind(this)}\r\n\r\n                            />\r\n\r\n                            {(this.state.optionFilter != undefined && this.state.optionFilter.length > 0) ? <button onClick={this.resetSingle.bind(this)} style={{ float: 'right' }} type=\"button\" class=\"g-ml-10 btn btn-xs  g-brd-none u-btn-primary rounded-0 g-letter-spacing-1 g-font-weight-700 g-font-size-12 text-uppercase  btn-secondary \">RESET</button> : <span></span>}\r\n\r\n                            <button onClick={this.onClick.bind(this)} style={{ float: 'right' }} type=\"button\" class=\"btn btn-xs text-right g-brd-none u-btn-primary rounded-0 g-letter-spacing-1 g-font-weight-700 g-font-size-12 text-uppercase btn-secondary \">OK</button>\r\n\r\n\r\n                        </div> : <div className=\"text-center\">\r\n                            {date[0].value}\r\n                            {(this.state.optionFilter != undefined && this.state.optionFilter.length > 0) ? <button onClick={this.resetSingle.bind(this)} style={{ float: 'right' }} type=\"button\" class=\"g-ml-10 btn btn-xs  g-brd-none u-btn-primary rounded-0 g-letter-spacing-1 g-font-weight-700 g-font-size-12 text-uppercase  btn-secondary \">RESET</button> : <span></span>}\r\n\r\n                        </div>}\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\r\n    return {\r\n        codeDict: state.DictionaryReducer,\r\n        lang: state.LanguageReducer,\r\n        //  catOptions: state.EditCategoryReducer\r\n\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(CategoryOptionSearchSINGLE);\r\n\r\n"],"file":"CategoryOptionSearchSINGLE.js"}